<%= link_to '<< Back', root_path, class: "btn btn-secondary" %>

<h1 align="center">On Sites</h1>
<hr />

<div class="row">
  <div class="col">
    <%= link_to 'New Onsite', new_onsite_path, class: "btn btn-success" %>
    <%= link_to 'Blank Onsite Form', onsite_blank_form_path, class: "btn btn-secondary" %>
  </div>
  <nav aria-label="Page navigation example col">
    <ul class="pagination">
      <li class="page-item">
        <% if @page != 1 %>
          <%= link_to onsite_index_path(page: (@page - 1)), class: 'page-link' do %>
            <span aria-hidden="true">&laquo;</span>
            <span class="sr-only">Previous</span>
          <% end %>
        <% end %>
      </li>
      <% build_pagination(@page, @max_page).each do |page| %>
        <li class="page-item"><%= link_to "#{page}", onsite_index_path(page: page), class: 'page-link' %></li>
      <% end %>
      <li class="page-item">
        <% if @page != @max_page %>
          <%= link_to onsite_index_path(page: (@page + 1)), class: 'page-link' do %>
            <span aria-hidden="true">&raquo;</span>
            <span class="sr-only">Next</span>
          <% end %>
        <% end %>
      </li>
    </ul>
  </nav>
</div>

<br />

<table class="table">
  <thead>
    <th>On-Site ID</th>
    <th>Name</th>
    <th>Primary Number</th>
    <th>Street Address</th>
    <th>Date / Time</th>
    <th>Options</th>
  </thead>
  <tbody>
    <% @onsites.each do |onsite| %>
      <tr id="onsite-<%= "#{onsite.id}" %>">
        <td><%= onsite.id %></td>
        <td><%= onsite.client.name %></td>
        <td><%= onsite.client.phone %></td>
        <td><%= onsite.client.street %></td>
        <td><%= onsite.onsite_date.strftime('%m/%d/%y at %l:%M %p') %></td>
        <td>
          <div class="btn-group">
            <%= link_to 'Show / Print', onsite_path(onsite), class: "btn btn-secondary" %>
            <%= link_to 'Edit', edit_onsite_path(onsite), class: "btn btn-secondary" %>
            <button class="btn btn-danger">Delete</button>
          </div>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
